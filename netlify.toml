[build]
  # Indispensable : Netlify doit savoir où chercher les fonctions
  functions = "netlify/functions"

  # Force rebuild: install dependencies properly
  command = "npm install --production"

[functions]
  # Chemin vers les fonctions (redondance de sécurité)
  directory = "netlify/functions"

  # Utilisation d'esbuild (bundler rapide qui supporte mieux les dépendances)
  node_bundler = "esbuild"

  # Dépendances externes à inclure (vital pour Supabase et Axios)
  external_node_modules = [
    "@supabase/supabase-js",
    "axios"
  ]